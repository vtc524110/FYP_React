{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\FYP_React\\\\src\\\\components\\\\Category\\\\CarsProperty.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport CategoryTable from './CategoryTable.js';\nimport Spinner from 'react-bootstrap/Spinner';\n\nclass CarsProperty extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.isLoading = () => {\n      return this.state.loading;\n    };\n\n    this.dataisNull = () => {\n      return this.state.data == null;\n    };\n\n    this.state = {\n      loading: true,\n      error: null,\n      data: [],\n      category: \"Cars & Property\",\n      fetch: \"http://desmond.business:8080/fyp/getCategoryFirstLvs\",\n      oAuth: \"http://desmond.business:8080/fyp/authenticate\"\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      data: [],\n      loading: true,\n      error: null\n    });\n    axios.request({\n      url: this.oAuth,\n      method: \"post\",\n      baseURL: this.fetch,\n      auth: {\n        username: \"des123\",\n        password: \"password\"\n      },\n      data: {\n        \"grant_type\": \"client_credentials\",\n        \"scope\": \"public\"\n      }\n    }).then(res => {\n      console.log(\"Find\"); // Transform the raw data by extracting the nested posts\n\n      const posts = res.data.results; //console.log(posts);\n      // Update state to trigger a re-render.\n      // Clear any errors, and turn off the loading indiciator.\n\n      posts.forEach(elm => {\n        if (elm.category_first_lv_name == this.state.category) {\n          for (var i = 0; i < elm.theCategorySecondLvs.length - 1; i++) {\n            for (var k = 0; k < elm.theCategorySecondLvs[i].theCategoryThirdLvLv.length; k++) {\n              let mapping = {};\n\n              if (elm.theCategorySecondLvs[i].theCategoryThirdLvLv.length <= 1) {\n                mapping[elm.theCategorySecondLvs[i].category_second_lv_name] = elm.theCategorySecondLvs[i].theCategoryThirdLvLv[k].category_third_lv_name;\n              } else {\n                for (var j = 0; j < elm.theCategorySecondLvs.length; j++) {\n                  mapping[elm.theCategorySecondLvs[j].category_second_lv_name] = elm.theCategorySecondLvs[j].theCategoryThirdLvLv[k].category_third_lv_name;\n                }\n              }\n\n              this.state.data.push(mapping);\n            }\n          }\n        }\n      });\n      this.setState({\n        loading: false\n      });\n    }).catch(err => {\n      // Something went wrong. Save the error in state and re-render.\n      this.setState({\n        loading: false,\n        error: err\n      });\n    });\n  }\n\n  render() {\n    const {\n      data,\n      loading\n    } = this.state;\n\n    if (loading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Spinner, {\n        animation: \"border\",\n        variant: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CategoryTable, {\n        data: data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n}\n\nexport default CarsProperty;","map":{"version":3,"sources":["D:/React/FYP_React/src/components/Category/CarsProperty.js"],"names":["React","axios","CategoryTable","Spinner","CarsProperty","Component","constructor","props","isLoading","state","loading","dataisNull","data","error","category","fetch","oAuth","componentDidMount","setState","request","url","method","baseURL","auth","username","password","then","res","console","log","posts","results","forEach","elm","category_first_lv_name","i","theCategorySecondLvs","length","k","theCategoryThirdLvLv","mapping","category_second_lv_name","category_third_lv_name","j","push","catch","err","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport axios from 'axios';\r\nimport CategoryTable from './CategoryTable.js'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\n\r\nclass CarsProperty extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            loading: true,\r\n            error: null,\r\n            data: [],\r\n            category: \"Cars & Property\",\r\n            fetch: \"http://desmond.business:8080/fyp/getCategoryFirstLvs\",\r\n            oAuth: \"http://desmond.business:8080/fyp/authenticate\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            data: [],\r\n            loading: true,\r\n            error: null\r\n        })\r\n\r\n        axios.request({\r\n            url: this.oAuth,\r\n            method: \"post\",\r\n            baseURL: this.fetch,\r\n            auth: {\r\n                username: \"des123\",\r\n                password: \"password\"\r\n            },\r\n            data: {\r\n                \"grant_type\": \"client_credentials\",\r\n                \"scope\": \"public\"\r\n            }\r\n        }).then(res => {\r\n            console.log(\"Find\");\r\n                // Transform the raw data by extracting the nested posts\r\n\r\n                const posts = res.data.results;\r\n                //console.log(posts);\r\n                // Update state to trigger a re-render.\r\n                // Clear any errors, and turn off the loading indiciator.\r\n\r\n                posts.forEach((elm) => {\r\n                    if (elm.category_first_lv_name == this.state.category) {\r\n                        for (var i = 0; i < elm.theCategorySecondLvs.length-1; i++) {\r\n                   \r\n                            for (var k = 0; k < elm.theCategorySecondLvs[i].theCategoryThirdLvLv.length; k++) {\r\n                                \r\n                                let mapping = {}\r\n                           \r\n                                if (elm.theCategorySecondLvs[i].theCategoryThirdLvLv.length<=1){\r\n                                    mapping[elm.theCategorySecondLvs[i].category_second_lv_name] = elm.theCategorySecondLvs[i].theCategoryThirdLvLv[k].category_third_lv_name    \r\n                                } else {\r\n\r\n                                for (var j =0 ; j <elm.theCategorySecondLvs.length;j++){\r\n                                \r\n                                    mapping[elm.theCategorySecondLvs[j].category_second_lv_name] = elm.theCategorySecondLvs[j].theCategoryThirdLvLv[k].category_third_lv_name\r\n                                }\r\n                      \r\n                              \r\n                            }\r\n                            this.state.data.push(mapping)\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                })\r\n \r\n                this.setState({\r\n                    loading: false\r\n                })\r\n            })\r\n            .catch(err => {\r\n                // Something went wrong. Save the error in state and re-render.\r\n                this.setState({\r\n                    loading: false,\r\n                    error: err\r\n                });\r\n            })\r\n        \r\n    }\r\n\r\n    isLoading = () => {\r\n        return this.state.loading\r\n    }\r\n\r\n    dataisNull = () => {\r\n        return this.state.data == null\r\n    }\r\n\r\n    render() {\r\n        const { data, loading } = this.state;\r\n\r\n        if (loading) {\r\n            return (\r\n                <div>\r\n                    <Spinner animation=\"border\" variant=\"primary\" />\r\n                </div>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <CategoryTable data={data} />\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default CarsProperty;"]},"metadata":{},"sourceType":"module"}